webpackJsonp([1],{"/+Z2":function(t,n,e){"use strict";function i(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function o(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function s(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0}),e.d(n,"default",function(){return c});var a=e("KM04"),r=(e.n(a),e("vO8M")),u=e.n(r),c=function(t){function n(){for(var n,e,i,s=arguments.length,a=Array(s),r=0;r<s;r++)a[r]=arguments[r];return n=e=o(this,t.call.apply(t,[this].concat(a))),e.state=JSON.parse(localStorage.state||"0")||{tasks:[],max:0,taskID:0},e.actions={addTask:function(t,n){this.setState(this.actions.transforms.addTask.bind(this,t,n)),this.saveState()},updateTaskText:function(t,n){this.setState(this.actions.transforms.updateTaskText.bind(this,t,n.target.value)),this.saveState()},toggleTask:function(t){(t.work&&1===t.work[t.work.length-1].length?this.actions.stopTask:this.actions.startTask).call(this,t)},startTask:function(t){this.setState(this.actions.transforms.startTask.bind(this,t)),this.saveState()},stopTask:function(t){this.setState(this.actions.transforms.stopTask.bind(this,t)),this.saveState()},setTaskDone:function(t,n){this.setState(this.actions.transforms.setTaskDone.bind(this,t,n.target.checked)),this.saveState()},remove:function(t){this.setState(this.actions.transforms.removeTask.bind(this,t)),this.saveState()},transforms:{addTask:function(t,n,e){var i=e.taskID++;!function(t,n,e){for(var i=0;i<t.length;i++)if(e<t[i].estimate)return void t.splice(i,0,n);t.push(n)}(e.tasks,{id:i,text:t,estimate:n,created:(new Date).getTime()},n),n>e.max&&(e.max=n)},updateTaskText:function(t,n){t.text=n},startTask:function(t){t.running=!0,t.work=t.work||[],t.work.push([(new Date).getTime()])},stopTask:function(t,n){var e=t.work[t.work.length-1];e[1]=(new Date).getTime(),t.workDuration=(t.workDuration||0)+(e[1]-e[0])/1e3/60,delete t.running,t.workDuration>n.max&&(n.max=t.workDuration)},setTaskDone:function(t,n){t.done=n,n?t.removalInterval=setInterval(this.actions.remove.bind(this,t),3e4):clearInterval(t.removalInterval),t.running&&this.actions.stopTask.call(this,t)},removeTask:function(t,n){var e=n.tasks.indexOf(t);e>=0&&n.tasks.splice(e,1)}}},i=n,o(e,i)}return s(n,t),n.prototype.saveState=function(){localStorage.state=JSON.stringify(this.state)},n.prototype.render=function(t,n){var o=n.tasks,s=n.max;return i(t),e.i(a.h)("home",null,e.i(a.h)(l,{tasks:o,max:s,actions:this.actions,actionBase:this}),e.i(a.h)(p,{onEntry:this.actions.addTask.bind(this)}))},n}(a.Component),l=function(t){function n(){return o(this,t.apply(this,arguments))}return s(n,t),n.prototype.render=function(t){var n=t.tasks,i=t.max,o=t.actions,s=t.actionBase;return e.i(a.h)("task-list",null,n.map(function(t){return e.i(a.h)(d,{key:t.id,task:t,max:i,actions:o,actionBase:s})}))},n}(a.Component),h=e.i(a.h)("select",{value:"minute(s)",disabled:!0},e.i(a.h)("option",{disabled:!0},"$$$ second(s) $$$"),e.i(a.h)("option",null,"minute(s)"),e.i(a.h)("option",{disabled:!0},"$$$ hour(s) $$$"),e.i(a.h)("option",{disabled:!0},"$$$ days(s) $$$")),p=function(t){function n(){return o(this,t.apply(this,arguments))}return s(n,t),n.prototype.buttonClick=function(t){t(this.inputEl.value,parseFloat(this.estimateEl.value)),this.inputEl.value="",this.inputEl.focus()},n.prototype.inputKeydown=function(t,n){13===n.keyCode&&this.buttonClick(t)},n.prototype.render=function(t){var n=this,i=t.onEntry;return e.i(a.h)("task-entry",null,e.i(a.h)("task-input",null,e.i(a.h)("input",{type:"text",ref:function(t){return n.inputEl=t},placeholder:"Enter task...",autofocus:!0,tabindex:0,onKeydown:this.inputKeydown.bind(this,i)}),e.i(a.h)("estimate-input",null,e.i(a.h)("input",{type:"number",ref:function(t){return n.estimateEl=t},defaultValue:5,min:1,onKeydown:this.inputKeydown.bind(this,i)}),h)),e.i(a.h)("button",{onClick:this.buttonClick.bind(this,i)},"+"))},n}(a.Component),d=function(t){function n(){for(var n,e,i,s=arguments.length,a=Array(s),r=0;r<s;r++)a[r]=arguments[r];return n=e=o(this,t.call.apply(t,[this].concat(a))),e.state={editMode:!1,workDuration:(e.props.task.workDuration||0)+(e.props.task.work?(new Date).getTime()-e.props.task.work[e.props.task.work.length-1][0]:0)/1e3/60},i=n,o(e,i)}return s(n,t),n.prototype.toggleEditMode=function(t){this.setState(function(t){return{editMode:!t.editMode}}),t.stopPropagation()},n.prototype.render=function(t,n){var i=this,o=t.task,s=t.max,r=t.actions,c=r.setTaskDone,l=r.updateTaskText,h=r.toggleTask,p=t.actionBase,d=n.editMode,f=o.text,k=o.estimate,m=o.done,y=o.workDuration,b=o.running;return e.i(a.h)("task",{className:m?u.a.done:"",onClick:h.bind(p,o)},e.i(a.h)("estimate-bar",{style:{width:k/s*100+"%"}}),e.i(a.h)("duration-bar",{style:{width:y/s*100+"%"}}),e.i(a.h)("info-line",null,e.i(a.h)("input",{type:"checkbox",onChange:c.bind(p,o),checked:m,onClick:function(t){return t.stopPropagation()}}),d?e.i(a.h)("input",{type:"text",value:f,onClick:function(t){return t.stopPropagation()},onBlur:function(t){return l.call(p,o,t)&i.setState({editMode:!1})}}):e.i(a.h)("task-text",{onClick:this.toggleEditMode.bind(this)},f),e.i(a.h)("estimate",null,k," minute(s)"),e.i(a.h)("status",null,b?"running":""," ",((y||0)/k*100).toFixed(2),"%")))},n}(a.Component)},vO8M:function(t){t.exports={"flex-column":"flex-column__1T5OV",done:"done__i3gJX"}}});
//# sourceMappingURL=route-home.chunk.0a93e.js.map
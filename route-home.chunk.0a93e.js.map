{"version":3,"sources":["webpack:///route-home.chunk.0a93e.js","webpack:///./routes/home/index.js","webpack:///./routes/home/style.less"],"names":["webpackJsonp","/+Z2","module","__webpack_exports__","__webpack_require__","_objectDestructuringEmpty","obj","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","d","Home","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1__style__","n","__WEBPACK_IMPORTED_MODULE_1__style___default","_Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","this","apply","concat","state","JSON","parse","localStorage","tasks","max","taskID","actions","addTask","text","estimate","setState","transforms","bind","saveState","updateTaskText","task","_ref","target","toggleTask","work","stopTask","startTask","setTaskDone","_ref2","checked","remove","removeTask","id","i","splice","push","created","Date","getTime","running","workDuration","done","removalInterval","setInterval","clearInterval","index","indexOf","stringify","render","_ref3","_ref4","TaskList","actionBase","TaskEntry","onEntry","_Component2","_ref5","map","t","Task","key","_ref7","disabled","_Component3","buttonClick","inputEl","parseFloat","estimateEl","focus","inputKeydown","event","keyCode","_ref6","_this4","type","ref","el","placeholder","autofocus","tabindex","onKeydown","defaultValue","min","onClick","_Component4","_temp2","_this5","_ret2","_len2","_key2","editMode","props","toggleEditMode","_ref8","stopPropagation","_ref9","_ref10","_this6","_ref9$actions","className","a","style","width","onChange","onBlur","toFixed","vO8M","exports","flex-column"],"mappings":"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","file":"route-home.chunk.0a93e.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"/+Z2\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Home; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__style__ = __webpack_require__(\"vO8M\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__style__);\n\n\nfunction _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError(\"Cannot destructure undefined\"); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar Home = function (_Component) {\n  _inherits(Home, _Component);\n\n  function Home() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = JSON.parse(localStorage['state'] || '0') || {\n      tasks: [],\n      max: 0,\n      taskID: 0\n    }, _this.actions = {\n      addTask: function addTask(text, estimate) {\n        this.setState(this.actions.transforms.addTask.bind(this, text, estimate));\n        this.saveState();\n      },\n      updateTaskText: function updateTaskText(task, _ref) {\n        var value = _ref.target.value;\n\n        this.setState(this.actions.transforms.updateTaskText.bind(this, task, value));\n        this.saveState();\n      },\n      toggleTask: function toggleTask(task) {\n        (task.work && task.work[task.work.length - 1].length === 1 ? this.actions.stopTask : this.actions.startTask).call(this, task);\n      },\n      startTask: function startTask(task) {\n        this.setState(this.actions.transforms.startTask.bind(this, task));\n        this.saveState();\n      },\n      stopTask: function stopTask(task) {\n        this.setState(this.actions.transforms.stopTask.bind(this, task));\n        this.saveState();\n      },\n      setTaskDone: function setTaskDone(task, _ref2) {\n        var checked = _ref2.target.checked;\n\n        this.setState(this.actions.transforms.setTaskDone.bind(this, task, checked));\n        this.saveState();\n      },\n      remove: function remove(task) {\n        this.setState(this.actions.transforms.removeTask.bind(this, task));\n        this.saveState();\n      },\n\n\n      transforms: {\n        addTask: function addTask(text, estimate, state) {\n          var id = state.taskID++;\n\n          insertByEstimate(state.tasks, { id: id, text: text, estimate: estimate, created: new Date().getTime() }, estimate);\n\n          if (estimate > state.max) state.max = estimate;\n\n          function insertByEstimate(tasks, task, estimate) {\n            for (var i = 0; i < tasks.length; i++) {\n              if (estimate < tasks[i].estimate) {\n                tasks.splice(i, 0, task);\n                return;\n              }\n            }\n            tasks.push(task);\n          }\n        },\n        updateTaskText: function updateTaskText(task, text, state) {\n          task.text = text;\n        },\n        startTask: function startTask(task, state) {\n          task.running = true;\n          task.work = task.work || [];\n          task.work.push([new Date().getTime()]);\n        },\n        stopTask: function stopTask(task, state) {\n          var work = task.work[task.work.length - 1];\n          work[1] = new Date().getTime();\n          task.workDuration = (task.workDuration || 0) + (work[1] - work[0]) / 1000 / 60;\n          delete task.running;\n          if (task.workDuration > state.max) state.max = task.workDuration;\n        },\n        setTaskDone: function setTaskDone(task, checked, state) {\n          task.done = checked;\n\n          if (checked) {\n            task.removalInterval = setInterval(this.actions.remove.bind(this, task), 30 * 1000);\n          } else {\n            clearInterval(task.removalInterval);\n          }\n\n          if (task.running) this.actions.stopTask.call(this, task);\n        },\n        removeTask: function removeTask(task, state) {\n          var index = state.tasks.indexOf(task);\n\n          if (index >= 0) state.tasks.splice(index, 1);\n        }\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Home.prototype.saveState = function saveState() {\n    localStorage['state'] = JSON.stringify(this.state);\n  };\n\n  Home.prototype.render = function render(_ref3, _ref4) {\n    var tasks = _ref4.tasks,\n        max = _ref4.max;\n\n    _objectDestructuringEmpty(_ref3);\n\n    return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n      'home',\n      null,\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(TaskList, { tasks: tasks, max: max, actions: this.actions, actionBase: this }),\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(TaskEntry, { onEntry: this.actions.addTask.bind(this) })\n    );\n  };\n\n  return Home;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\n\n\nvar TaskList = function (_Component2) {\n  _inherits(TaskList, _Component2);\n\n  function TaskList() {\n    _classCallCheck(this, TaskList);\n\n    return _possibleConstructorReturn(this, _Component2.apply(this, arguments));\n  }\n\n  TaskList.prototype.render = function render(_ref5) {\n    var tasks = _ref5.tasks,\n        max = _ref5.max,\n        actions = _ref5.actions,\n        actionBase = _ref5.actionBase;\n\n    return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n      'task-list',\n      null,\n      tasks.map(function (t) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(Task, { key: t.id, task: t, max: max, actions: actions, actionBase: actionBase });\n      })\n    );\n  };\n\n  return TaskList;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\nvar _ref7 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'select',\n  { value: 'minute(s)', disabled: true },\n  __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n    'option',\n    { disabled: true },\n    '$$$ second(s) $$$'\n  ),\n  __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n    'option',\n    null,\n    'minute(s)'\n  ),\n  __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n    'option',\n    { disabled: true },\n    '$$$ hour(s) $$$'\n  ),\n  __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n    'option',\n    { disabled: true },\n    '$$$ days(s) $$$'\n  )\n);\n\nvar TaskEntry = function (_Component3) {\n  _inherits(TaskEntry, _Component3);\n\n  function TaskEntry() {\n    _classCallCheck(this, TaskEntry);\n\n    return _possibleConstructorReturn(this, _Component3.apply(this, arguments));\n  }\n\n  TaskEntry.prototype.buttonClick = function buttonClick(onEntry) {\n    onEntry(this.inputEl.value, parseFloat(this.estimateEl.value));\n    this.inputEl.value = '';\n    this.inputEl.focus();\n  };\n\n  TaskEntry.prototype.inputKeydown = function inputKeydown(onEntry, event) {\n    if (event.keyCode === 13) this.buttonClick(onEntry);\n  };\n\n  TaskEntry.prototype.render = function render(_ref6) {\n    var _this4 = this;\n\n    var onEntry = _ref6.onEntry;\n\n    return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n      'task-entry',\n      null,\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        'task-input',\n        null,\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { type: 'text', ref: function ref(el) {\n            return _this4.inputEl = el;\n          }, placeholder: 'Enter task...', autofocus: true, tabindex: 0, onKeydown: this.inputKeydown.bind(this, onEntry) }),\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'estimate-input',\n          null,\n          __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { type: 'number', ref: function ref(el) {\n              return _this4.estimateEl = el;\n            }, defaultValue: 5, min: 1, onKeydown: this.inputKeydown.bind(this, onEntry) }),\n          _ref7\n        )\n      ),\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        'button',\n        { onClick: this.buttonClick.bind(this, onEntry) },\n        '+'\n      )\n    );\n  };\n\n  return TaskEntry;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\nvar Task = function (_Component4) {\n  _inherits(Task, _Component4);\n\n  function Task() {\n    var _temp2, _this5, _ret2;\n\n    _classCallCheck(this, Task);\n\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _ret2 = (_temp2 = (_this5 = _possibleConstructorReturn(this, _Component4.call.apply(_Component4, [this].concat(args))), _this5), _this5.state = {\n      editMode: false,\n      workDuration: (_this5.props.task.workDuration || 0) + (_this5.props.task.work ? new Date().getTime() - _this5.props.task.work[_this5.props.task.work.length - 1][0] : 0) / 1000 / 60\n    }, _temp2), _possibleConstructorReturn(_this5, _ret2);\n  }\n\n  Task.prototype.toggleEditMode = function toggleEditMode(event) {\n    this.setState(function (_ref8) {\n      var editMode = _ref8.editMode;\n      return { editMode: !editMode };\n    });\n    event.stopPropagation();\n  };\n\n  Task.prototype.render = function render(_ref9, _ref10) {\n    var _this6 = this;\n\n    var task = _ref9.task,\n        max = _ref9.max,\n        _ref9$actions = _ref9.actions,\n        setTaskDone = _ref9$actions.setTaskDone,\n        updateTaskText = _ref9$actions.updateTaskText,\n        toggleTask = _ref9$actions.toggleTask,\n        actionBase = _ref9.actionBase;\n    var editMode = _ref10.editMode;\n    var text = task.text,\n        estimate = task.estimate,\n        done = task.done,\n        work = task.work,\n        workDuration = task.workDuration,\n        running = task.running;\n\n    // if (work && work[work.length - 1].length === 1) this.interval = setInterval(this.updateWorkDuration.bind(this), 1000);\n    // else if (this.interval) clearInterval(this.interval);\n\n    return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n      'task',\n      { className: done ? __WEBPACK_IMPORTED_MODULE_1__style___default.a['done'] : '', onClick: toggleTask.bind(actionBase, task) },\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('estimate-bar', { style: { width: estimate / max * 100 + '%' } }),\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('duration-bar', { style: { width: workDuration / max * 100 + '%' } }),\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        'info-line',\n        null,\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { type: 'checkbox', onChange: setTaskDone.bind(actionBase, task), checked: done, onClick: function onClick(event) {\n            return event.stopPropagation();\n          } }),\n        editMode ? __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { type: 'text', value: text, onClick: function onClick(event) {\n            return event.stopPropagation();\n          }, onBlur: function onBlur(event) {\n            return updateTaskText.call(actionBase, task, event) & _this6.setState({ editMode: false });\n          } }) : __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'task-text',\n          { onClick: this.toggleEditMode.bind(this) },\n          text\n        ),\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'estimate',\n          null,\n          estimate,\n          ' minute(s)'\n        ),\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'status',\n          null,\n          running ? 'running' : '',\n          ' ',\n          ((workDuration || 0) / estimate * 100).toFixed(2),\n          '%'\n        )\n      )\n    );\n  };\n\n  return Task;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\n/***/ }),\n\n/***/ \"vO8M\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"flex-column\":\"flex-column__1T5OV\",\"done\":\"done__i3gJX\"};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-home.chunk.0a93e.js","import { h, Component } from 'preact';\nimport style from './style';\n\nexport default class Home extends Component {\n  state = JSON.parse(localStorage['state'] || '0') || {\n    tasks: [],\n    max: 0,\n    taskID: 0\n  }\n\n  saveState() {\n    localStorage['state'] = JSON.stringify(this.state);\n  }\n\n  actions = {\n    addTask (text, estimate) {\n      this.setState(this.actions.transforms.addTask.bind(this, text, estimate));\n      this.saveState();\n    },\n\n    updateTaskText (task, {target: {value}}) {\n      this.setState(this.actions.transforms.updateTaskText.bind(this, task, value));\n      this.saveState();\n    },\n\n    toggleTask (task) {\n      (task.work && task.work[task.work.length - 1].length === 1 ? this.actions.stopTask : this.actions.startTask).call(this, task);\n    },\n\n    startTask (task) {\n      this.setState(this.actions.transforms.startTask.bind(this, task));\n      this.saveState();\n    },\n\n    stopTask (task) {\n      this.setState(this.actions.transforms.stopTask.bind(this, task));\n      this.saveState();\n    },\n\n    setTaskDone (task, {target:{checked}}) {\n      this.setState(this.actions.transforms.setTaskDone.bind(this, task, checked));\n      this.saveState();\n    },\n\n    remove (task) {\n      this.setState(this.actions.transforms.removeTask.bind(this, task));\n      this.saveState();\n    },\n\n    transforms: {\n      addTask(text, estimate, state) {\n        const id = state.taskID++;\n\n        insertByEstimate(state.tasks, {id, text, estimate, created: new Date().getTime()}, estimate);\n\n        if (estimate > state.max) state.max = estimate;\n\n        function insertByEstimate(tasks, task, estimate) {\n          for (let i = 0; i < tasks.length; i++) {\n            if (estimate < tasks[i].estimate) {\n              tasks.splice(i, 0, task);\n              return;\n            }\n          }\n          tasks.push(task);\n        }\n      },\n\n      updateTaskText(task, text, state) {\n        task.text = text;\n      },\n\n      startTask(task, state) {\n        task.running = true;\n        task.work = task.work || [];\n        task.work.push([new Date().getTime()]);\n      },\n\n      stopTask(task, state) {\n        const work = task.work[task.work.length - 1];\n        work[1] = new Date().getTime();\n        task.workDuration = (task.workDuration || 0) + (work[1] - work[0]) / 1000 / 60;\n        delete task.running;\n        if (task.workDuration > state.max) state.max = task.workDuration;\n      },\n\n      setTaskDone(task, checked, state) {\n        task.done = checked;\n\n        if (checked) {\n          task.removalInterval = setInterval(this.actions.remove.bind(this, task), 30 * 1000);\n        }\n        else {\n          clearInterval(task.removalInterval);\n        }\n\n        if (task.running) this.actions.stopTask.call(this, task)\n      },\n\n      removeTask(task, state) {\n        const index = state.tasks.indexOf(task);\n\n        if (index >= 0) state.tasks.splice(index, 1);\n      }\n    }\n  }\n\n  render({}, {tasks, max}) {\n    return (\n      <home>\n        <TaskList tasks={tasks} max={max} actions={this.actions} actionBase={this} />\n        <TaskEntry onEntry={this.actions.addTask.bind(this)} />\n      </home>\n    );\n  }\n}\n\n\nclass TaskList extends Component {\n  render({tasks, max, actions, actionBase}) {\n    return (\n      <task-list>\n        {tasks.map(t => <Task key={t.id} task={t} max={max} actions={actions} actionBase={actionBase} />)}\n      </task-list>\n    );\n  }\n}\n\nclass TaskEntry extends Component {\n  buttonClick(onEntry) {\n    onEntry(this.inputEl.value, parseFloat(this.estimateEl.value));\n    this.inputEl.value = '';\n    this.inputEl.focus();\n  }\n\n  inputKeydown(onEntry, event) {\n    if (event.keyCode === 13) this.buttonClick(onEntry);\n  }\n\n  render({onEntry}) {\n    return (\n      <task-entry>\n        <task-input>\n          <input type=\"text\" ref={el => this.inputEl = el} placeholder=\"Enter task...\" autofocus tabindex={0} onKeydown={this.inputKeydown.bind(this, onEntry)} />\n          <estimate-input>\n            <input type=\"number\" ref={el => this.estimateEl = el} defaultValue={5} min={1} onKeydown={this.inputKeydown.bind(this, onEntry)} />\n            <select value=\"minute(s)\" disabled>\n              <option disabled>$$$ second(s) $$$</option>\n              <option>minute(s)</option>\n              <option disabled>$$$ hour(s) $$$</option>\n              <option disabled>$$$ days(s) $$$</option>\n            </select>\n          </estimate-input>\n        </task-input>\n        <button onClick={this.buttonClick.bind(this, onEntry)}>+</button>\n      </task-entry>\n    );\n  }\n}\n\nclass Task extends Component {\n  state = {\n    editMode: false,\n    workDuration: (this.props.task.workDuration || 0) + (this.props.task.work ? new Date().getTime() - this.props.task.work[this.props.task.work.length - 1][0] : 0) / 1000 / 60\n  }\n\n  toggleEditMode(event) {\n    this.setState(({editMode}) => ({editMode: !editMode}));\n    event.stopPropagation();\n  }\n\n  render({task, max, actions: {setTaskDone, updateTaskText, toggleTask}, actionBase}, {editMode}) {\n    const {text, estimate, done, work, workDuration, running} = task;\n\n    // if (work && work[work.length - 1].length === 1) this.interval = setInterval(this.updateWorkDuration.bind(this), 1000);\n    // else if (this.interval) clearInterval(this.interval);\n\n    return (\n      <task className={done ? style['done'] : ''} onClick={toggleTask.bind(actionBase, task)}>\n        <estimate-bar style={{width: `${estimate / max * 100}%`}}></estimate-bar>\n        <duration-bar style={{width: `${workDuration / max * 100}%`}}></duration-bar>\n        <info-line>\n          <input type=\"checkbox\" onChange={setTaskDone.bind(actionBase, task)} checked={done} onClick={event => event.stopPropagation()} />\n          {editMode ?\n              <input type=\"text\" value={text} onClick={event => event.stopPropagation()} onBlur={event => updateTaskText.call(actionBase, task, event) & this.setState({editMode: false})} />\n            : <task-text onClick={this.toggleEditMode.bind(this)}>{text}</task-text>\n          }\n          <estimate>{estimate} minute(s)</estimate>\n          <status>{running ? 'running' : ''} {((workDuration || 0) / estimate * 100).toFixed(2)}%</status>\n        </info-line>\n      </task>\n    );\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./routes/home/index.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"flex-column\":\"flex-column__1T5OV\",\"done\":\"done__i3gJX\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./routes/home/style.less\n// module id = vO8M\n// module chunks = 1"],"sourceRoot":""}